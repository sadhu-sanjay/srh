---
import Image from "astro/components/Image.astro";
const iWidth = "2rem"
---

<main id="main-window" class="relative h-[100dvh] w-full bg-white">
  <div id="spacer" class="h-[400dvh] w-full bg-primary">
    <img
      id="logo"
      src="SRHLogo_Glitch.gif"
      alt="SRH Logo website logo"
      class="sticky left-1/2 top-1/2 w-1/3 -translate-x-1/2 -translate-y-1/2 transition-all duration-700 sm:w-3/12 sm:landscape:w-1/12"
    />

    <div
      id="mainTitle"
      class="sticky top-full z-20 w-full justify-between text-center text-accent transition-all duration-700"
    >
      <text class="text-center text-7xl text-[33dvw] font-black leading-none">
        AR<span class="absolute left-1/2">ISE</span>
      </text>

      <div
        id="iExpendable"
        class="absolute bottom-1/2 left-1/2 z-10 ml-0.5 h-12 w-[1.35rem] origin-bottom bg-white transition-transform duration-700 xl:ml-2 xl:w-[5.2rem]"
      >
      </div>

      <div
        id="subText"
        class="w-full -translate-y-3 whitespace-nowrap text-center text-[9.5vw] font-black leading-none xl:-translate-y-16"
      >
        YE SLEEPING GIANTS
      </div>

      <p
        id="para1"
        class="absolute left-1/2 h-28 w-32 -translate-x-[110%] whitespace-pre-wrap text-wrap text-right text-xs font-bold leading-tight text-secondary-accent transition-all duration-700 sm:text-base xl:w-52 xl:text-xl"
      >
        We harness empirical marketing(1) to awaken brands to their true
        potential
      </p>

      <p
        id="para2"
        class="absolute left-1/2 top-[200%] h-28 w-32 translate-x-7 text-left text-xs font-bold leading-tight text-secondary-accent transition-all duration-700 sm:text-base xl:w-52 xl:translate-x-32 xl:text-xl"
      >
        We use strategy, creative and media to make brands famous in their
        categories.
      </p>

      <svg class="absolute left-1/2 top-0" fill="black" height="200px" width={iWidth} version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M508.8,278.947L263.467,35.107c-4.16-4.16-10.88-4.16-15.04,0L3.2,279.053c-2.027,2.027-3.093,4.693-3.2,7.573v182.72 c0,5.867,4.8,10.667,10.667,10.667c2.88,0,5.547-1.173,7.573-3.093L256,238.947l237.867,237.76 c4.16,4.16,10.987,4.053,15.04-0.107c1.92-1.92,2.987-4.587,3.093-7.36V286.52C512,283.64,510.827,280.867,508.8,278.947z M490.667,443.427l-227.2-227.093c-4.267-4.053-10.88-4.053-15.04,0L21.333,443.64V291.107L256,57.72l234.667,233.173V443.427z"></path> </g> </g> </g></svg>

    </div>
  </div>
</main>

<script>
  const break1 = 10;
  const break2 = 20;
  const break3 = 30;
  const break4 = 40;
  const break5 = 50;
  const break6 = 60;

  const logo = document.getElementById("logo") as HTMLImageElement;
  const main = document.getElementById("main-section") as HTMLElement;
  const mainTitle = document.getElementById("mainTitle") as HTMLElement;
  const iExpendable = document.getElementById("iExpendable") as HTMLElement;
  const para1 = document.getElementById("para1") as HTMLElement;
  const para2 = document.getElementById("para2") as HTMLElement;

  const isMobile = window.matchMedia("(max-width: 639px)").matches;
  const isTablet = window.matchMedia(
    "(min-width: 640px) and (max-width: 1023px)"
  ).matches;
  const isLaptop = window.matchMedia(
    "(min-width: 1024px) and (max-width: 1279px)"
  ).matches;
  const isLaptopWithHIdpi = window.matchMedia(
    "(min-width: 1280px) and (max-width: 1535px)"
  ).matches;
  const isDesktop = window.matchMedia("(min-width: 1536px)").matches;

  window.addEventListener("scroll", (ev: Event) => {
    const scrollY = window.scrollY;
    const scrollHeight = document.documentElement.scrollHeight;
    const scrobbaleHeight = scrollHeight - window.outerHeight;

    const scrolledPercentage = (scrollY / scrobbaleHeight) * 100;
    console.log("here & There", scrolledPercentage);

    if (scrolledPercentage <= break1) {
      // STEP 0
      logo.style.left = "50%";
      logo.style.top = "50%";
      logo.style.transform = "translate(-50%,-50%)";

      mainTitle.style.top = "100%";

      iExpendable.style.transform = "scaleY(1)";

      para1.style.top = "200%";
      para2.style.top = "200%";
    } else if (
      // STEP 1
      scrolledPercentage > break1 &&
      scrolledPercentage <= break2
    ) {
      logo.style.transform = "translate(0,0)";

      if (isMobile) {
        logo.style.left = "4%";
        logo.style.top = "2%";
        mainTitle.style.top = "78%";
      } else if (isTablet) {
        mainTitle.style.top = "71%";
      } else if (isLaptop) {
        mainTitle.style.top = "49%";
      } else if (isLaptopWithHIdpi) {
        mainTitle.style.top = "40%";
        logo.style.left = "4%";
        logo.style.top = "4%";
      } else if (isDesktop) {
        mainTitle.style.top = "32%";
      }

      iExpendable.style.transform = "scaleY(1)";
    } else if (
      // STEP 2
      scrolledPercentage > break2 &&
      scrolledPercentage <= break3
    ) {
      para1.style.top = "200%";

      if (isMobile) {
        mainTitle.style.top = "78%";
        iExpendable.style.transform = "scaleY(12)";
      } else if (isTablet) {
        iExpendable.style.transform = "scaleY(4.35)";
      } else if (isLaptop) {
        iExpendable.style.transform = "scaleY(3)";
      } else if (isLaptopWithHIdpi) {
        iExpendable.style.transform = "scaleY(12)";
      } else if (isDesktop) {
        iExpendable.style.transform = "scaleY(1.8)";
      }
    } else if (
      // STEP 3
      scrolledPercentage > break3 &&
      scrolledPercentage <= break4
    ) {
      if (isMobile) {
        mainTitle.style.top = "83%";
        para1.style.top = "-83%";
        para2.style.top = "200%";
      } else if (isTablet) {
        mainTitle.style.top = "76%";
        para1.style.top = "-10%";
      } else if (isLaptop) {
        mainTitle.style.top = "56%";
        para1.style.top = "-10%";
      } else if (isLaptopWithHIdpi) {
        mainTitle.style.top = "56%";
        para1.style.top = "-45%";
        para2.style.top = "200%";
      }
    } else if (
      // STEP 4
      scrolledPercentage > break4 &&
      scrolledPercentage <= break5
    ) {
      if (isMobile) {
        mainTitle.style.top = "86%";
        para1.style.top = "-83%";
        para2.style.top = "-93%";
      } else if (isTablet) {
        mainTitle.style.top = "80%";
        para2.style.top = "-10%";
      } else if (isLaptop) {
        mainTitle.style.top = "62%";
      } else if (isLaptopWithHIdpi) {
        para1.style.top = "-45%";
        para2.style.top = "-55%";
        mainTitle.style.top = "60%";
      }
    } else if (scrolledPercentage > break5 && scrolledPercentage <= break6) {
      // STEP 5
      // STEP 5: Move `mainTitle`, `para1`, and `para2` together toward the top
      let moveValue = 8;

      if (isMobile) {
        mainTitle.style.top = `${parseFloat(mainTitle.style.top) + moveValue}%`;
      } else if (isLaptopWithHIdpi) {
        let newMove = moveValue / 2;
        mainTitle.style.top = `${parseFloat(mainTitle.style.top) + newMove}%`;
      } else {
        mainTitle.style.top = `${parseFloat(mainTitle.style.top) + moveValue}%`;
      }
    }
  });
</script>
