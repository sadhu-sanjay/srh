---
const iWidth = "1.8rem";
import Circles from "../components/Circles.astro";
import ThreeArrow from "../Icons/ThreeArrow.astro";
---

<style is:global>
  .i-width {
    width: 1.36rem;
  }

  .margin-right-custom {
    margin-right: 0.4rem;
  }

  @media (min-width: 768px and max-width: 1023px) {
    .i-width {
      width: 3.4rem;
    }
  }

  @media (min-width: 1024px and max-width: 1279px) {
    .i-width {
      width: 3.4rem;
    }
  }

  @media (min-width: 1280px) {
    .i-width {
      width: 5.3rem;
    }
    .margin-right-custom {
      margin-right: 1rem;
    }
  }

  @media (min-width: 1536px) and (max-width: 1920px) {
    .i-width {
      width: 7rem;
    }
    .margin-right-custom {
      margin-right: 1.2rem;
    }
  }
</style>

<main
  id="main-window"
  class="relative h-[100dvh] w-[100dvw] overflow-scroll bg-white"
>
  <img
    id="logo"
    src="SRHLogo_Glitch.gif"
    alt="SRH Logo website logo"
    class="fixed left-1/2 top-1/2 z-20 w-1/3 -translate-x-1/2 -translate-y-1/2 transition-all duration-700 sm:w-3/12 sm:landscape:w-1/12"
  />

  <div
    id="spacer"
    class="relative left-1/2 h-[1400dvh] w-[120%] -translate-x-1/2 border-4 border-rose-800 bg-primary"
  >
    <div
      id="mainTitle"
      class="sticky top-full w-full justify-between text-center text-accent transition-all duration-700"
    >
      <text class="text-center text-7xl text-[33dvw] font-black leading-none">
        AR<span class="-ml-[0.20rem] xl:-ml-[0.950rem] 2xl:-ml-5">I</span>SE
      </text>

      <div
        id="iExpendable"
        class="i-width absolute bottom-1/2 left-1/2 h-12 origin-bottom bg-accent transition-all duration-700 xl:w-[5.2rem]"
      >
      </div>

      <div
        id="para3"
        style="writing-mode: sideways-lr;"
        class="margin-right-custom absolute right-1/2 top-[200%] font-bold text-secondary-accent transition-all duration-1000 xl:text-5xl 2xl:text-7xl"
      >
        Let's climb <br /> together.
      </div>

      <ThreeArrow
        id="arrow"
        class="i-width absolute left-1/2 top-[200%] bg-transparent transition-all duration-1000"
      />

      <div
        id="subText"
        class="w-full -translate-y-3 whitespace-nowrap text-center text-[9.5vw] font-black leading-none xl:-translate-y-16"
      >
        YE SLEEPING GIANTS
      </div>

      <p
        id="para1"
        class="margin-right-custom absolute right-1/2 h-28 w-32 whitespace-pre-wrap text-wrap text-right text-xs font-bold leading-tight text-secondary-accent transition-all duration-700 sm:text-base xl:w-52 xl:text-2xl xl:font-normal"
      >
        We harness empirical marketing(1) to awaken brands to their true
        potential
      </p>

      <p
        id="para2"
        class="absolute left-1/2 top-[200%] h-28 w-32 translate-x-7 text-left text-xs font-bold leading-tight text-secondary-accent transition-all duration-700 sm:text-base xl:w-52 xl:translate-x-32 xl:text-2xl xl:font-normal"
      >
        We use strategy, creative and media to make brands famous in their
        categories.
      </p>
    </div>

    <Circles />

    <!-- <FameText /> -->
  </div>

  <script>
    const break1 = 7;
    const break2 = 14;
    const break3 = 21;
    const break4 = 28;
    const break5 = 35;
    const break6 = 42;
    const break7 = 49;
    const break8 = 56;
    const break9 = 63;
    const break10 = 70;

    const logo = document.getElementById("logo") as HTMLImageElement;
    const mainTitle = document.getElementById("mainTitle") as HTMLElement;
    const iExpendable = document.getElementById("iExpendable") as HTMLElement;
    const para1 = document.getElementById("para1") as HTMLElement;
    const para2 = document.getElementById("para2") as HTMLElement;
    const para3 = document.getElementById("para3") as HTMLElement;
    const arrow = document.getElementById("arrow") as HTMLElement;
    const svgCircles = document.getElementById("svg-circles") as HTMLElement;
    const mainWindow = document.getElementById("main-window") as HTMLElement;

    const isMobile = window.matchMedia("(max-width: 639px)").matches;
    const isTablet = window.matchMedia(
      "(min-width: 640px) and (max-width: 1023px)"
    ).matches;
    const isLaptop = window.matchMedia(
      "(min-width: 1024px) and (max-width: 1279px)"
    ).matches;
    const isLaptopLarge = window.matchMedia(
      "(min-width: 1280px) and (max-width: 1535px)"
    ).matches;
    const isDesktop = window.matchMedia("(min-width: 1536px)").matches;

    mainWindow.addEventListener("scroll", (e: Event) => {
      console.log("Main Window");

      const targetEl = e.target as HTMLElement;
      const screenHeight = window.outerHeight;
      const scrollableHeight = targetEl.scrollHeight - screenHeight;
      const scrolled = targetEl.scrollTop;
      const scrolledPercentage = (scrolled / scrollableHeight) * 100;

      console.log("%%", scrolledPercentage);

      if (scrolledPercentage <= break1) {
        logo.style.left = "50%";
        logo.style.top = "50%";
        logo.style.transform = "translate(-50%,-50%)";

        mainTitle.style.top = "100%";

        iExpendable.style.transform = "scaleY(1)";

        para1.style.top = "200%";
        para2.style.top = "200%";
        para3.style.top = "200%";
        arrow.style.top = "200%";
      } else if (
        // STEP 1
        scrolledPercentage > break1 &&
        scrolledPercentage <= break2
      ) {
        logo.style.transform = "translate(0,0)";

        if (isMobile) {
          logo.style.left = "4%";
          logo.style.top = "2%";
          mainTitle.style.top = "78%";
        } else if (isTablet) {
          mainTitle.style.top = "71%";
        } else if (isLaptop) {
          mainTitle.style.top = "49%";
        } else if (isLaptopLarge) {
          mainTitle.style.top = "40%";
          logo.style.left = "4%";
          logo.style.top = "4%";
        } else if (isDesktop) {
          logo.style.left = "4%";
          logo.style.top = "4%";
          mainTitle.style.top = "32%";
        }

        iExpendable.style.transform = "scaleY(1)";
      } else if (
        // STEP 2
        scrolledPercentage > break2 &&
        scrolledPercentage <= break3
      ) {
        para1.style.top = "200%";

        if (isMobile) {
          mainTitle.style.top = "78%";
          iExpendable.style.transform = "scaleY(12)";
        } else if (isTablet) {
          iExpendable.style.transform = "scaleY(4.35)";
        } else if (isLaptop) {
          iExpendable.style.transform = "scaleY(3)";
        } else if (isLaptopLarge) {
          iExpendable.style.transform = "scaleY(40)";
        } else if (isDesktop) {
          iExpendable.style.transform = "scaleY(20)";
        }
      } else if (
        // STEP 3
        scrolledPercentage > break3 &&
        scrolledPercentage <= break4
      ) {
        if (isMobile) {
          mainTitle.style.top = "83%";
          para1.style.top = "-83%";
          para2.style.top = "200%";
        } else if (isTablet) {
          mainTitle.style.top = "76%";
          para1.style.top = "-10%";
        } else if (isLaptop) {
          mainTitle.style.top = "56%";
          para1.style.top = "-10%";
        } else if (isLaptopLarge) {
          mainTitle.style.top = "56%";
          para1.style.top = "-45%";
          para2.style.top = "200%";
        } else if (isDesktop) {
          mainTitle.style.top = "56%";
          para1.style.top = "-30%";
          para2.style.top = "200%";
        }
      } else if (
        // STEP 4
        scrolledPercentage > break4 &&
        scrolledPercentage <= break5
      ) {
        if (isMobile) {
          mainTitle.style.top = "86%";
          para1.style.top = "-83%";
          para2.style.top = "-93%";
          arrow.style.top = "200%";
          para3.style.top = "200%";
        } else if (isTablet) {
          mainTitle.style.top = "80%";
          para2.style.top = "-10%";
        } else if (isLaptop) {
          mainTitle.style.top = "62%";
        } else if (isLaptopLarge) {
          para1.style.top = "-45%";
          para2.style.top = "-55%";
          mainTitle.style.top = "60%";
          arrow.style.top = "96%";
          para3.style.top = "96%";


        } else if (isDesktop) {
          para1.style.top = "-30%";
          para2.style.top = "-55%";
          mainTitle.style.top = "60%";
          arrow.style.top = "96%";
        }
      } else if (scrolledPercentage > break5 && scrolledPercentage <= break6) {
        // STEP 5

        if (isMobile) {
          mainTitle.style.top = "96%";
          arrow.style.top = "-200%";
          para3.style.top = "-200%";
        } else if (isLaptopLarge) {
          mainTitle.style.top = "80%";
          arrow.style.top = "-110%";
          para3.style.top = "-110%";

          svgCircles.style.opacity = "0";
          svgCircles.style.top = "-140dvh";


        } else if (isDesktop) {
          mainTitle.style.top = "75%";
          arrow.style.top = "-95%";
        }

        arrow.style.transitionDuration = "1s";
        arrow.style.opacity = "1";
      } else if (scrolledPercentage > break6 && scrolledPercentage <= break7) {
        arrow.style.transitionDuration = "1.7s";
        arrow.style.opacity = "0";

        if (isMobile) {
        } else if (isLaptopLarge) {
          arrow.style.top = "-270%";
          mainTitle.style.top = "200%";

          svgCircles.style.opacity = "1";
          svgCircles.style.top = "0";

          iExpendable.style.transform = "translateX(0px) scaleY(40)"
        }
      } else if (scrolledPercentage > break7 && scrolledPercentage <= break8) {
        if (isMobile) {
        } else if (isLaptopLarge) {

        iExpendable.style.transform = "translateX(70px) scaleY(40) "
        }
      }
      else if (scrolledPercentage > break8 && scrolledPercentage <= break9) {

          iExpendable.style.width = "5.3rem"
          iExpendable.style.transform = "translateX(70px) scaleY(40) "

      } 
      else if (scrolledPercentage > break9 && scrolledPercentage <= break10) {

        iExpendable.style.transform = "translateX(400px) scaleY(40) "
        iExpendable.style.width = "16rem"

      }

    });
  </script>
</main>
