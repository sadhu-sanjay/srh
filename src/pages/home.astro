---
const iWidth = "1.8rem";
import Circles from "../components/Circles.astro";
import MyWorkText from "../components/my-work-Text.astro";
import Settings from "../components/Settings.astro";
import StrategyText from "../components/Strategy-text.astro";
import ThreeArrow from "../Icons/ThreeArrow.astro";
---

<style is:global>
  .i-width {
    width: 1.25rem;
  }

  .margin-right-custom {
    margin-right: 0.4rem;
  }

  @media (min-width: 640px) and (max-width: 1023px) {
    .i-width {
      width: 3.5rem;
    }
  }

  @media (min-width: 1024px) and (max-width: 1279px) {
    .i-width {
      width: 4.4rem;
    }
    .margin-right-custom {
      margin-right: 1rem;
    }
  }

  @media (min-width: 1280px) and (max-width: 1535px) {
    .i-width {
      width: 4.7rem;
    }
    .margin-right-custom {
      margin-right: 2rem;
    }
  }

  @media (min-width: 1536px) and (max-width: 2560px) {
    .i-width {
      width: 6.8rem;
    }
    .margin-right-custom {
      margin-right: 1.2rem;
    }
  }

  /* Hide scrollbar */
  #main-window::-webkit-scrollbar {
    display: none;
  }

  #main-window {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
</style>

<main
  id="main-window"
  class="relative h-[100dvh] w-[100dvw] overflow-scroll scroll-smooth bg-white"
>
  <a href="/">
    <img
      id="logo"
      src="SRHLogo_Glitch.gif"
      alt="SRH Logo website logo"
      class="fixed left-1/2 top-1/2 z-20 w-1/3 -translate-x-1/2 -translate-y-1/2 transition-all duration-700 sm:w-3/12 sm:landscape:w-1/12"
    />
  </a>

  <div
    id="spacer"
    class="relative -left-[10%] -top-[100dvh] h-[2200dvh] w-[120%] border-4 bg-primary"
  >
    <Settings />

    <div
      id="mainTitle"
      class="sticky top-full w-full justify-between text-center text-accent transition-all duration-700"
    >
      <div
        class="realtive relative text-center text-7xl text-[33dvw] font-black leading-none"
      >
        ARISE
        <div
          id="iExpendable"
          class="i-width absolute bottom-1/4 left-[50.5%] h-12 origin-bottom bg-accent transition-all duration-1000"
        >
        </div>
      </div>

      <div
        id="para3"
        style="writing-mode: sideways-lr;"
        class="margin-right-custom absolute right-1/2 top-[200%] font-bold text-secondary-accent transition-all duration-1000 xl:text-5xl 2xl:text-7xl"
      >
        Let's climb <br /> together.
      </div>

      <ThreeArrow
        id="arrow"
        class="i-width absolute left-[50.5%] top-[200%] transition-all duration-1000"
      />

      <div
        id="subText"
        class="w-full -translate-y-3 whitespace-nowrap text-center text-[9.5vw] font-black leading-none xl:-translate-y-16"
      >
        YE SLEEPING GIANTS
      </div>

      <p
        id="para1"
        class="margin-right-custom absolute right-1/2 h-28 w-32 whitespace-pre-wrap text-wrap text-right text-xs font-bold leading-tight text-secondary-accent transition-all duration-700 sm:text-base xl:w-52 xl:text-2xl xl:font-normal"
      >
        We harness empirical marketing(1) to awaken brands to their true
        potential
      </p>

      <p
        id="para2"
        class="absolute left-[52%] top-[200%] h-28 w-32 translate-x-6 text-left text-xs font-bold leading-tight text-secondary-accent transition-all duration-700 sm:translate-x-12 sm:text-base md:translate-x-16 lg:translate-x-20 xl:w-52 xl:translate-x-32 xl:text-2xl xl:font-normal"
      >
        We use strategy, creative and media to make brands famous in their
        categories.
      </p>
    </div>

    <Circles />
    <StrategyText />
    <MyWorkText />
  </div>

  <script>
    import {
      break1,
      break2,
      break3,
      break4,
      break5,
      break6,
      break7,
      break8,
      break9,
      break10,
      break11,
      break12,
      break13,
    } from "../constants";

    const logo = document.getElementById("logo") as HTMLImageElement;
    const mainTitle = document.getElementById("mainTitle") as HTMLElement;
    const iExpendable = document.getElementById("iExpendable") as HTMLElement;
    const para1 = document.getElementById("para1") as HTMLElement;
    const para2 = document.getElementById("para2") as HTMLElement;
    const para3 = document.getElementById("para3") as HTMLElement;
    const arrow = document.getElementById("arrow") as HTMLElement;
    const svgCircles = document.getElementById("svg-circles") as HTMLElement;
    const mainWindow = document.getElementById("main-window") as HTMLElement;

    let isMobile = window.matchMedia("(max-width: 639px)").matches;
    let isTablet = window.matchMedia(
      "(min-width: 640px) and (max-width: 1023px)"
    ).matches;
    let isLaptop = window.matchMedia(
      "(min-width: 1024px) and (max-width: 1279px)"
    ).matches;
    let isLaptopLarge = window.matchMedia(
      "(min-width: 1280px) and (max-width: 1535px)"
    ).matches;
    let isDesktop = window.matchMedia("(min-width: 1536px)").matches;
    let iExpendablePercent = "45";


    mainWindow.addEventListener("scroll", (e: Event) => {
      console.log("Main Window");

      const targetEl = e.target as HTMLElement;
      const screenHeight = window.outerHeight;
      const scrollableHeight = targetEl.scrollHeight - screenHeight;
      const scrolled = targetEl.scrollTop;
      const scrolledPercentage = (scrolled / scrollableHeight) * 100;

      console.log("%%", scrolledPercentage);

      if (scrolledPercentage <= break1) {
        logo.style.left = "50%";
        logo.style.top = "50%";
        logo.style.transform = "translate(-50%,-50%)";

        mainTitle.style.top = "100%";

        iExpendable.style.transform = "scaleY(1)";

        para1.style.top = "200%";
        para2.style.top = "200%";
        para3.style.top = "200%";
        arrow.style.top = "200%";
      } else if (
        // STEP 1
        scrolledPercentage > break1 &&
        scrolledPercentage <= break2
      ) {
        logo.style.transform = "translate(0,0)";
        logo.style.left = "4%";
        logo.style.top = "4%";

        if (isMobile) {
          logo.style.left = "4%";
          logo.style.top = "2%";
          mainTitle.style.top = "78%";
        } else if (isTablet) {
          mainTitle.style.top = "71%";
        } else if (isLaptop) {
          mainTitle.style.top = "49%";
        } else if (isLaptopLarge) {
          mainTitle.style.top = "40%";
        } else if (isDesktop) {
          mainTitle.style.top = "32%";
        }

        iExpendable.style.transform = "scaleY(1)";
      } else if (
        // STEP 2
        scrolledPercentage > break2 &&
        scrolledPercentage <= break3
      ) {
        para1.style.top = "200%";
        iExpendable.style.transform = `scaleY(${iExpendablePercent})`;

        if (isMobile) {
          mainTitle.style.top = "78%";
        } else if (isTablet) {
        } else if (isLaptop) {
        } else if (isLaptopLarge) {
        } else if (isDesktop) {
        }
      } else if (
        // STEP 3
        scrolledPercentage > break3 &&
        scrolledPercentage <= break4
      ) {
        if (isMobile) {
          mainTitle.style.top = "83%";
          para1.style.top = "-83%";
          para2.style.top = "200%";
        } else if (isTablet) {
          mainTitle.style.top = "76%";
          para1.style.top = "-10%";
          para2.style.top = "200%";
        } else if (isLaptop) {
          mainTitle.style.top = "56%";
          para1.style.top = "-45%";
          para2.style.top = "200%";
        } else if (isLaptopLarge) {
          mainTitle.style.top = "56%";
          para1.style.top = "-45%";
          para2.style.top = "200%";
        } else if (isDesktop) {
          mainTitle.style.top = "56%";
          para1.style.top = "-30%";
          para2.style.top = "200%";
        }
      } else if (
        // STEP 4
        scrolledPercentage > break4 &&
        scrolledPercentage <= break5
      ) {
        if (isMobile) {
          mainTitle.style.top = "86%";
          para1.style.top = "-83%";
          para2.style.top = "-93%";
          arrow.style.top = "200%";
          para3.style.top = "200%";
        } else if (isTablet) {
          mainTitle.style.top = "80%";
          para2.style.top = "-55%";
        } else if (isLaptop) {
          mainTitle.style.top = "62%";
          para1.style.top = "-45%";
          para2.style.top = "-55%";
          arrow.style.top = "96%";
          para3.style.top = "96%";
        } else if (isLaptopLarge) {
          para1.style.top = "-45%";
          para2.style.top = "-55%";
          mainTitle.style.top = "60%";
          arrow.style.top = "96%";
          para3.style.top = "96%";
        } else if (isDesktop) {
          para1.style.top = "-30%";
          para2.style.top = "-55%";
          mainTitle.style.top = "60%";
          arrow.style.top = "96%";
        }
      } else if (scrolledPercentage > break5 && scrolledPercentage <= break6) {
        // STEP 5

        svgCircles.style.opacity = "0";
        arrow.style.transitionDuration = "1s";
        arrow.style.opacity = "1";

        if (isMobile) {
          mainTitle.style.top = "96%";
          arrow.style.top = "-200%";
          para3.style.top = "-200%";
          svgCircles.style.top = "100dvh";
        }else if (isTablet) {

          mainTitle.style.top = "80%";
          arrow.style.top = "-110%";
          para3.style.top = "-110%";

        } else if (isLaptopLarge) {
          mainTitle.style.top = "80%";
          arrow.style.top = "-110%";
          para3.style.top = "-110%";

          svgCircles.style.top = "-140dvh";
        } else if (isDesktop) {
          mainTitle.style.top = "75%";
          arrow.style.top = "-85%";

          svgCircles.style.top = "-140dvh";
        }
      } else if (scrolledPercentage > break6 && scrolledPercentage <= break7) {
        // STEP 6

        arrow.style.transitionDuration = "2.3s";
        arrow.style.opacity = "0";

        iExpendable.style.transform = `translateX(0px) scaleY(${iExpendablePercent})`;
        svgCircles.style.opacity = "1";

        if (isMobile) {
          svgCircles.style.top = "21dvh";
          mainTitle.style.top = "200%";
        } else if (isTablet) {

          svgCircles.style.top = "0";
          arrow.style.top = "-270%";
          mainTitle.style.top = "200%";
        } else if (isLaptopLarge) {
          svgCircles.style.top = "0";
          arrow.style.top = "-270%";
          mainTitle.style.top = "200%";
        } else if (isDesktop) {
          svgCircles.style.top = "0";
          arrow.style.top = "-200%";
          mainTitle.style.top = "200%";
        }

      } else if (scrolledPercentage > break7 && scrolledPercentage <= break8) {
        // STEP 7

        if (isMobile) {
          iExpendable.style.width = "1.25rem";
          iExpendable.style.transform = `translateX(30px) scaleY(${iExpendablePercent})`;
        } else if (isTablet) {
          iExpendable.style.width = "3.5rem";
          iExpendable.style.transform = `translateX(30px) scaleY(${iExpendablePercent})`;
        } else if (isLaptopLarge) {
          iExpendable.style.transform = `translateX(70px) scaleY(${iExpendablePercent})`;
          iExpendable.style.width = "4.7rem";
        } else if (isDesktop) {
          iExpendable.style.transform = `translateX(70px) scaleY(${iExpendablePercent})`;
          iExpendable.style.width = "6.8rem";
        }
      } else if (scrolledPercentage > break8 && scrolledPercentage <= break9) {
        // STEP 8
        if (isMobile) {
          iExpendable.style.width = "1.25rem";
        } else if (isTablet) {
          iExpendable.style.width = "3.5rem";
        } else if (isLaptopLarge) {
          iExpendable.style.width = "4.7rem";
        } else if (isDesktop) {
          iExpendable.style.width = "6.8rem";
        }
      } else if (scrolledPercentage > break9 && scrolledPercentage <= break10) {
        // STEP 9

        if (isMobile) {
          iExpendable.style.transform = `translateX(80px) scaleY(${iExpendablePercent})`;
          iExpendable.style.width = "12rem";
        }else if (isTablet) {
          iExpendable.style.transform = `translateX(80px) scaleY(${iExpendablePercent})`;
          iExpendable.style.width = "12rem";
        } else if (isLaptopLarge) {
          iExpendable.style.transform = `translateX(400px) scaleY(${iExpendablePercent})`;
          iExpendable.style.width = "16rem";
        } else if (isDesktop) {
          iExpendable.style.transform = `translateX(400px) scaleY(${iExpendablePercent})`;
          iExpendable.style.width = "16rem";
        }
      } else if (
        scrolledPercentage > break10 &&
        scrolledPercentage <= break11
      ) {
        // STEP 10

        iExpendable.style.transform = `translateX(10%) scaleY(${iExpendablePercent})`;
        if (isMobile) {
          iExpendable.style.width = "1.25rem";
        }else if (isTablet) {
          iExpendable.style.width = "3.5rem";
        } else if (isLaptopLarge) {
          iExpendable.style.width = "4.7rem";
        } else if (isDesktop) {
          iExpendable.style.width = "6.8rem";
        }
      } else if (
        scrolledPercentage > break11 &&
        scrolledPercentage <= break12
      ) {
        // STEP 11
      } else if (
        scrolledPercentage > break12 &&
        scrolledPercentage <= break13
      ) {
      } else {
        logo.style.left = "6%";
        logo.style.top = "6%";
      }
    });
  </script>
</main>
